%{
#include <string.h>
int n_kw=0,n_id=0,n_cmt=0,n_words=0,n_lines=0,n_spaces=0;
char *kw[]={"int","char","float","double","if","else","for","while","return","void","long","short","switch","case","break","continue","do","static","const","struct"};
int nkw=sizeof(kw)/sizeof(kw[0]);
int iskw(const char*s){ for(int i=0;i<nkw;i++) if(!strcmp(s,kw[i])) return 1; return 0; }
%}
%x CMT
%%
"//".*                  { n_cmt++; }
"/*"                    { BEGIN(CMT); }
<CMT>"*/"               { BEGIN(INITIAL); n_cmt++; }
<CMT>.|\n               { }
[ \t]+                  { n_spaces += yyleng; }
\n                      { n_lines++; }
[A-Za-z_][A-Za-z0-9_]*  { if(iskw(yytext)) n_kw++; else n_id++; n_words++; }
[0-9]+                  { n_words++; }
.                       { /* ignore */ }
%%
int main(){
  yylex();
  printf("Comments=%d Keywords=%d Identifiers=%d Words=%d Lines=%d Spaces=%d\n",
         n_cmt,n_kw,n_id,n_words,n_lines,n_spaces);
}
